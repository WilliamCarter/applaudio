<div id="base" ng-controller="BaseCtrl as base">

    <header>
        <h1>{{base.currentPath}}</h1>
    </header>

    <div id="lower-content" ng-controller="DirectoryListingCtrl as dl">

        <div id="left-panel">Music player to go here</div>

        <div id="listing-menu">

            <div class="empty-listing-placeholder" ng-if="!(dl.listing | filter:query).length" style="visibility:{{dl.placeholderVisibility}};">Nothing here...</div>

            <div ng-repeat="item in dl.listing | filter:query" class="directory" ng-click="dl.navigate(item)">
                <div id="directory_{{htmlify(item)}}">{{item}}</div>
            </div>

        </div>

        <div id="right-panel">

            <div id="filter">
                <input placeholder="Filter" ng-model="query">
                <!--<div id="filter-icon">â–¼</div>-->
            </div>

            <button class="with-icon" ng-click="dl.addDirectory()" icon="images/folder.png">
                <img ng-src="images/folder.png"/>New Directory
            </button>
            <applaudio-modal modal-id='dl.modals.MODAL_ADD_DIRECTORY' width="50%">
                <h1>Add Directory</h1>
                Directory name: <input id="directory-input" type="text" ng-model="directoryNameInput"><br/>
                <button ng-click="dl.hideModal()">Cancel</button>
                <button ng-click="dl.addDirectory(directoryNameInput);directoryNameInput='';" ng-disabled="!directoryNameInput">Add</button>
            </applaudio-modal>

            <button ng-click="dl.uploadMusic()">Upload Music</button>

        </div>

    </div>

    <div ng-show="modal.show">
        <div class="modal-background" ng-click="modal.cancel()"></div>
        <div id="modal-container">

            <h1>{{modal.heading}}</h1>

            <div ng-show="modal.showTextInput">
                <div class="tag">{{modal.textInputTag}}</div>
                <input type="text" ng-model="modal.textInput" placeholder="{{modal.textInputPlaceholder}}" >
            </div>
            <div ng-show="modal.showFileInput">
                <input id="modal-file-input" type="file" multiple accept="{{base.supportedMedia.join(', ')}}" onchange="angular.element(this).scope().modal.readUploadFiles()" hidden>
                <button ng-click="modal.clickFileInput()">Choose Files</button>
                <div id="upload-list">
                    <p ng-repeat="uploadFile in modal.uploadFiles">{{uploadFile.name}}</p>
                </div>
            </div>

            <button class="dismissive" ng-click="modal.hide()">{{modal.cancelText}}</button>
            <button class="dismissive" ng-show="modal.showConfirm" ng-click="modal.confirm()">{{modal.confirmText}}</button>

        </div>

    </div>

</div>